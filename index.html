<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Udeler | Udemy Course Downloader</title>
  <link rel="stylesheet" href="assets/css/semantic.min.css" />
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <div class="ui basic subtitle modal">
    <div class="ui icon header">
      <i class="closed captioning icon"></i>
      Select Subtitle
    </div>
    <div class="content">
      <div class="ui fluid selection dropdown">
        <input type="hidden" name="subtitle" />
        <i class="dropdown icon"></i>
        <div class="default text">Subtitle Language</div>
      </div>
    </div>
  </div>
  <div class="ui basic update-available modal">
    <div class="ui icon header">
      <i class="gift icon"></i>
      New Update Available
    </div>
    <div class="content">
      <p>
        <center>
          A new version of Udeler is available. You can download the latest
          version from github releases page
        </center>
      </p>
    </div>
    <div class="actions" style="text-align: center;">
      <div class="ui red cancel inverted button">
        <i class="remove icon"></i>
        Cancel
      </div>
      <div class="ui green ok inverted download-update button">
        <i class="checkmark icon"></i>
        Download
      </div>
    </div>
  </div>

  <div class="ui large lecture-list modal">
    <i class="close icon"></i>
    <div class="header">
      Course Lectures
    </div>
    <div class="scrolling content">
      <div class="ui relaxed divided list" id="lecture-list-container">
        <!-- Lectures will be dynamically inserted here -->
      </div>
    </div>
  </div>

  <div class="ui large video-list-popup modal">
    <i class="close icon"></i>
    <div class="header">
      Course Videos
    </div>
    <div class="scrolling content">
      <div id="video-list">
        <!-- Videos will be dynamically inserted here -->
      </div>
    </div>
  </div>

  <script>
    const $ = (jQuery = require("jquery"));
  </script>
  <script src="assets/js/semantic.min.js"></script>
  <script type="text/javascript">
    const settings = require("electron-settings");
    const appVersion = require(__dirname + "/package.json").version;
    function translate(text) {
      if (
        !settings.get("general.language") ||
        settings.get("general.language") == "English"
      ) {
        return text;
      } else {
        try {
          var meta = require("./locale/meta.json");
          var locale = require(`./locale/${meta[settings.get("general.language")]
            }`);
          return locale[text] || text;
        } catch (e) {
          return text;
        }
      }
    }

    var template = `
        <div class="ui center aligned login grid">
            <div class="ui login dimmer">
              <div class="ui big text loader">${translate("Logging in")}</div>
            </div>

            <div class="ui authenticator dimmer">
              <div class="ui big text loader">
                ${translate("Awaiting Login Request")}
              </div>
            </div>
    
          <div class="row">
            <div class="ten wide column">
                    <h2 class="ui icon grey login header">
                      <i class="circular green user icon"></i>
                      ${translate("Udemy Login")}
                    </h2>
            </div>
          </div>

          <div class="row">
              <div class="ten wide column">
              <button class="ui fluid blue button" onclick="loginWithAccessToken()"><i class="key icon"></i>${translate("Login")}</button>
              </div>
          </div>
        </div>
     <div class="ui dashboard" style="display: none;">    
            <div class="ui logout dimmer">
              <div class="ui big text loader">${translate("Logging Out")}</div>
            </div>  
            <div class="ui courses dimmer">
              <div class="ui big text loader">${translate(
      "Loading Courses"
    )}</div>
            </div>
             <div class="ui course dimmer">
              <div class="ui big text loader">${translate("Getting Info")}</div>
            </div>
            <div class="ui about dimmer">
              <div class="ui big text loader">${translate(
      "Checking for Updates"
    )}</div>
            </div>
              <div class="ui bottom-nav">
                <a class="active courses-sidebar item">
                  <i class="file video icon"></i>
                  <span>${translate("Courses")}</span>
                </a>
                <a class="downloads-sidebar item">
                  <i class="download icon"></i>
                  <span>${translate("Downloads")}</span>
                </a>
               <a class="settings-sidebar item">
                  <i class="wrench icon"></i>
                  <span>${translate("Settings")}</span>
                </a>
                <a class="about-sidebar item">
                  <i class="info icon"></i>
                  <span>${translate("About")}</span>
                </a>
                <a class="logout-sidebar item">
                  <i class="power off icon"></i>
                  <span>${translate("Logout")}</span>
                </a>
              </div>
                  <div class="main-content">

                      <div class="ui courses section">
                        <div class="courses-header">
                          <form class="ui search form">
                            <div class="ui fluid search">
                              <div class="ui fluid icon input">
                                <input class="prompt" type="text" placeholder="${translate("Search Courses")}">
                                <i class="search icon"></i>
                              </div>
                            </div>
                          </form>
                          <button class="ui refresh-courses button" onclick="refreshCourses()">
                            <i class="refresh icon"></i>
                            <span>${translate("Refresh")}</span>
                          </button>
                        </div>
                        <div class="ui divided unstackable courses items">
                        </div>
                      </div>

                    <div class="ui downloads section">
                      <div class="downloads-header">
                        <div class="downloads-title">
                          <i class="download icon"></i>
                          <h2>${translate("Downloads")}</h2>
                        </div>
                        <div class="downloads-actions">
                          <button class="ui clear-downloads button" onclick="clearAllDownloads()">
                            <i class="trash icon"></i>
                            <span>Clear All</span>
                          </button>
                          <button class="ui refresh-downloads button" onclick="refreshDownloads()">
                            <i class="refresh icon"></i>
                            <span>Refresh</span>
                          </button>
                        </div>
                      </div>
                      <div class="downloads-content">
                        <div class="downloads-stats">
                          <div class="stat-item">
                            <span class="stat-number" id="total-downloads">0</span>
                            <span class="stat-label">Total Files</span>
                          </div>
                          <div class="stat-item">
                            <span class="stat-number" id="total-size">0 MB</span>
                            <span class="stat-label">Total Size</span>
                          </div>
                          <div class="stat-item">
                            <span class="stat-number" id="total-courses">0</span>
                            <span class="stat-label">Courses</span>
                          </div>
                        </div>
                        <div class="downloads-list" id="downloads-list">
                          <!-- Downloads will be dynamically inserted here -->
                        </div>
                      </div>
                    </div>

                      <div class="ui settings section">
                        <div class="settings-container">
                          <form class="ui form">
                            <div class="settings-card">
                              <h3><i class="download icon"></i> ${translate("Download Settings")}</h3>
                              <div class="field">
                                <label>${translate("Download Path")}</label>
                                <div class="ui action input">
                                  <input type="text" readonly name="downloadpath">
                                  <button type="button" class="ui icon button btn-file" onclick="selectDownloadPath()">
                                    <i class="folder icon"></i>
                                  </button>
                                </div>
                              </div>
                              <div class="field">
                                <label>${translate("Video Quality")}</label>
                                <div class="ui fluid search selection dropdown">
                                  <input type="hidden" name="videoquality">
                                  <i class="dropdown icon"></i>
                                  <div class="default text"></div>
                                  <div class="menu">
                                    <div class="item" data-value="Auto">${translate("Auto")}</div>
                                    <div class="item" data-value="Lowest">${translate("Lowest")}</div>
                                    <div class="item" data-value="360p">360p</div>
                                    <div class="item" data-value="480p">480p</div>
                                    <div class="item" data-value="720p">720p</div>
                                    <div class="item" data-value="1080p">1080p</div>
                                    <div class="item" data-value="Highest">${translate("Highest")}</div>
                                  </div>
                                </div>
                              </div>
                              <div class="two unstackable fields">
                                <div class="field">
                                  <label>${translate("Download Start")}</label>
                                  <input placeholder="${translate("Start Download at")}" type="number" min="1" name="downloadstart">
                                </div>
                                <div class="field">
                                  <label>${translate("Download End")}</label>
                                  <input placeholder="${translate("End Download at")}" type="number" min="1" name="downloadend">
                                </div>
                              </div>
                              <div class="ui divider"></div>
                              <div class="field">
                                <div class="ui checkbox">
                                  <input type="checkbox" name="enabledownloadstartend">
                                  <label>${translate("Enable Download Start/End")}</label>
                                </div>
                              </div>
                              <div class="field">
                                <div class="ui checkbox">
                                  <input type="checkbox" name="skipattachments">
                                  <label>${translate("Skip Attachments")}</label>
                                </div>
                              </div>
                              <div class="field">
                                <div class="ui checkbox">
                                  <input type="checkbox" name="skipsubtitles">
                                  <label>${translate("Skip Subtitles")}</label>
                                </div>
                              </div>
                              <div class="field">
                                <div class="ui checkbox">
                                  <input type="checkbox" name="autoretry">
                                  <label>${translate("Auto Retry on Error (Experimental)")}</label>
                                </div>
                              </div>
                            </div>

                            <div class="settings-card">
                              <h3><i class="cog icon"></i> ${translate("Application Settings")}</h3>
                              <div class="field">
                                <label>${translate("Language (Requires App Restart)")}</label>
                                <div class="ui fluid search selection language dropdown">
                                  <input type="hidden" name="language">
                                  <i class="dropdown icon"></i>
                                  <div class="default text"></div>
                                  <div class="menu">
                                    <div class="item" data-value="English">English</div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <button class="ui fluid save-button" type="submit">${translate("Save Settings")}</button>
                          </form>
                        </div>
                      </div>

                      <div class="ui about section">
                        <div class="about-container">
                          <div class="about-card">
                            <div class="app-info">
                              <div class="app-version">
                                <i class="file code outline icon"></i>
                                <h2>Udeler v${appVersion}</h2>
                              </div>
                              <button class="ui tiny check-updates button">${translate(
      "Check for updates"
    )}</button>
                            </div>
                          </div>

                          <div class="about-card">
                            <h3>${translate("Links")}</h3>
                            <div class="ui relaxed divided list">
                              <div class="item">
                                <i class="large github middle aligned icon"></i>
                                <div class="content">
                                  <a class="header" href="https://github.com/FaisalUmair/udemy-downloader-gui">udemy-downloader-gui</a>
                                  <div class="description">${translate("Repository")}</div>
                                </div>
                              </div>
                              <div class="item">
                                <i class="large github middle aligned icon"></i>
                                <div class="content">
                                  <a class="header" href="https://github.com/FaisalUmair">FaisalUmair</a>
                                  <div class="description">${translate("Developer")}</div>
                                </div>
                              </div>
                              <div class="item">
                                <i class="large world middle aligned icon"></i>
                                <div class="content">
                                  <a class="header" href="http://thewebartisans.net/">thewebartisans.net</a>
                                  <div class="description">${translate("Website")}</div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="about-card">
                            <h3><i class="code icon"></i> Remade By</h3>
                            <div class="ui relaxed divided list">
                              <div class="item">
                                <i class="large github middle aligned icon"></i>
                                <div class="content">
                                  <a class="header" href="https://github.com/M3rcena">M3rcena</a>
                                  <div class="description">GitHub Profile</div>
                                </div>
                              </div>
                              <div class="item">
                                <i class="large linkedin middle aligned icon"></i>
                                <div class="content">
                                  <a class="header" href="https://www.linkedin.com/in/michael-farmakis-b1ab31269/">michael-farmakis-b1ab31269</a>
                                  <div class="description">Professional Profile</div>
                                </div>
                              </div>
                              <div class="item">
                                <i class="large world middle aligned icon"></i>
                                <div class="content">
                                  <a class="header" href="https://m3rcena.github.io/">m3rcena.github.io</a>
                                  <div class="description">Personal Website</div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="about-card">
                            <h3>${translate("Development")}</h3>
                            <div class="ui relaxed divided list">
                              <div class="item">
                                <i class="large github middle aligned icon"></i>
                                <div class="content">
                                  <a class="header" href="https://github.com/FaisalUmair/udemy-downloader-gui/issues">Report a Bug</a>
                                  <div class="description">${translate("Help us improve by reporting issues")}</div>
                                </div>
                              </div>
                              <div class="item">
                                <i class="large github middle aligned icon"></i>
                                <div class="content">
                                  <a class="header" href="https://github.com/FaisalUmair/udemy-downloader-gui/pulls">Contribute</a>
                                  <div class="description">${translate("Join the project and help with development")}</div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="about-card">
                            <h3>${translate("Donate")}</h3>
                            <p>${translate(
      "Udeler is free and without any ads. If you appreciate that, please consider donating to the Developer."
    )}</p>
                            <a href="https://www.udeler.com/donate" class="donate-link">
                              <img src="assets/images/donate.png" alt="Donate"/>
                            </a>
                          </div>
                        </div>
                      </div>
                </div>
     </div>
`;

    $("body").prepend(template);

    if (settings.get("general.language") == "Arabic") {
      $(".ui.dashboard .content")
        .css("margin-left", "10px")
        .css("width", "80%");
    }

    var $languageDropdown = $(".language.dropdown .menu");
    $.getJSON("locale/meta.json", function (data) {
      $.each(data, function (key) {
        $languageDropdown.append(
          `<div class="item" data-value=${key}>${key}</div>`
        );
      });
    });
  </script>
  <script src="assets/js/app.js"></script>
  <div id="toaster-container"></div>
</body>

</html>